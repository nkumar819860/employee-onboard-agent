# HTTPRoute Configuration for Employee Onboarding API
apiVersion: gateway.mulesoft.com/v1alpha1
kind: HTTPRoute
metadata:
  name: employee-onboarding-httproute
  namespace: default
  labels:
    app: employee-onboarding
    version: v1
spec:
  parentRefs:
    - name: employee-onboarding-gateway
      namespace: default
  hostnames:
    - "localhost"
    - "api.company.com"
    - "onboarding.company.com"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /broker/onboard
          method: POST
      backendRefs:
        - name: mule-broker-service
          port: 8081
          weight: 100
    - matches:
        - path:
            type: PathPrefix
            value: /mcp/postgres
          method: POST
      backendRefs:
        - name: postgres-mcp-service
          port: 8082
          weight: 100
    - matches:
        - path:
            type: PathPrefix
            value: /mcp/assets
          method: POST
      backendRefs:
        - name: assets-mcp-service
          port: 8083
          weight: 100
    - matches:
        - path:
            type: PathPrefix
            value: /mcp/notifications
          method: POST
      backendRefs:
        - name: notification-mcp-service
          port: 8084
          weight: 100
    - matches:
        - path:
            type: Exact
            value: /health
          method: GET
      backendRefs:
        - name: health-check-service
          port: 8080
          weight: 100
